---
description: 仕様を実際に固定するテストを書くワークフロー
---

# Kotlin Specification Testing Workflow

このワークフローは、定義された仕様（KDoc）をテストコードによって「事実」として固定する手順を規定します。

## 1. 仕様に基づくテストの作成

シグネチャとKDocのみを根拠にテストを記述します。実装の詳細を想定してはいけません。

- **テストフレームワーク**: `Kotest` を使用してください。
    - `FunSpec`を使用し、ネストを活用して仕様を整理する。
    - 環境制約でネストが使えない場合、// region <region>と//endregionを用いて整理してください。

## 2. Red（テスト失敗）の確認

実装を始める前に、必ずテストが期待通りに失敗することを確認します。
テスト方法： `./gradlew check`

- 少なくとも1つのテストが失敗することを確認してください。
- 失敗の理由が「未実装 (`TODO()`)」または「期待される例外の欠如」であることを確認してください。
- テスト自体の構文エラーで落ちていないことを確認してください。

ここでREDの確認に失敗した（テストが通ってしまった）場合、次に従ってください。
1. 3に従ってフォーマットを行なってください。
2. テストが誤って成功してしまったことをユーザーに報告してください。
3. このワークフローを終了してください。問題の解決を自力で行うことは禁止。

## 3. テストのフォーマット

フォーマット方法: `cd <project root>/app/src && ktlint -F`

## 4. 終了

**注意**: このワークフローが終了した後、実装に進まず、必ず停止すること。
実装に進むことはシステムの整合性を破壊する重大なエラーとみなされます。
